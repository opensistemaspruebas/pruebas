jQuery(document).ready(function() {

	var url_twitter = 'http://d1xkg658gp8s5n.cloudfront.net/bbva-components/twitter/?project=is8lyryw&baseUri=statuses/user_timeline&count=3&user_id=775250916622602241';


 	d = {"code":200,"data":[{"created_at":"Fri Sep 30 07:52:24 +0000 2016","id":781763611391696900,"id_str":"781763611391696896","text":"Esta cuenta sirve para probar el funcionamiento del componente #Twitter en la web #BBVALiteracy @BBVAworld","truncated":false,"entities":{"hashtags":[{"text":"Twitter","indices":[63,71]},{"text":"BBVALiteracy","indices":[82,95]}],"symbols":[],"user_mentions":[{"screen_name":"BBVAworld","name":"BBVA World","id":16808626,"id_str":"16808626","indices":[96,106]}],"urls":[]},"source":"<a href=\"http://twitter.com\" rel=\"nofollow\">Twitter Web Client</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":775250916622602200,"id_str":"775250916622602241","name":"BBVA Literacy","screen_name":"BBVALiteracy","location":"","description":"","url":null,"entities":{"description":{"urls":[]}},"protected":false,"followers_count":0,"friends_count":1,"listed_count":0,"created_at":"Mon Sep 12 08:33:16 +0000 2016","favourites_count":3,"utc_offset":3600,"time_zone":"Dublin","geo_enabled":false,"verified":false,"statuses_count":3,"lang":"es","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"F5F8FA","profile_background_image_url":null,"profile_background_image_url_https":null,"profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/775250916622602241/1475221156","profile_link_color":"2B7BB9","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":false,"default_profile":true,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":2,"favorited":true,"retweeted":false,"lang":"es"},{"created_at":"Fri Sep 30 07:43:25 +0000 2016","id":781761354214481900,"id_str":"781761354214481920","text":"RT @bbva: El acuerdo de paz en #Colombia podría ganar el premio Nobel de la Paz y otras historias que deberías conocer hoy: https://t.co/Zm…","truncated":false,"entities":{"hashtags":[{"text":"Colombia","indices":[31,40]}],"symbols":[],"user_mentions":[{"screen_name":"bbva","name":"BBVA","id":230125016,"id_str":"230125016","indices":[3,8]}],"urls":[]},"source":"<a href=\"http://twitter.com\" rel=\"nofollow\">Twitter Web Client</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":775250916622602200,"id_str":"775250916622602241","name":"BBVA Literacy","screen_name":"BBVALiteracy","location":"","description":"","url":null,"entities":{"description":{"urls":[]}},"protected":false,"followers_count":0,"friends_count":1,"listed_count":0,"created_at":"Mon Sep 12 08:33:16 +0000 2016","favourites_count":3,"utc_offset":3600,"time_zone":"Dublin","geo_enabled":false,"verified":false,"statuses_count":3,"lang":"es","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"F5F8FA","profile_background_image_url":null,"profile_background_image_url_https":null,"profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/775250916622602241/1475221156","profile_link_color":"2B7BB9","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":false,"default_profile":true,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false},"geo":null,"coordinates":null,"place":null,"contributors":null,"retweeted_status":{"created_at":"Thu Sep 29 21:00:08 +0000 2016","id":781599464528179200,"id_str":"781599464528179204","text":"El acuerdo de paz en #Colombia podría ganar el premio Nobel de la Paz y otras historias que deberías conocer hoy:… https://t.co/vEkeQHnYqd","truncated":true,"entities":{"hashtags":[{"text":"Colombia","indices":[21,30]}],"symbols":[],"user_mentions":[],"urls":[{"url":"https://t.co/vEkeQHnYqd","expanded_url":"https://twitter.com/i/web/status/781599464528179204","display_url":"twitter.com/i/web/status/7…","indices":[115,138]}]},"source":"<a href=\"http://www.hootsuite.com\" rel=\"nofollow\">Hootsuite</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":230125016,"id_str":"230125016","name":"BBVA","screen_name":"bbva","location":"","description":"Perfil oficial de información global sobre el Grupo BBVA y su actividad.","url":"https://t.co/SJhJ19FGVE","entities":{"url":{"urls":[{"url":"https://t.co/SJhJ19FGVE","expanded_url":"https://www.bbva.com/","display_url":"bbva.com","indices":[0,23]}]},"description":{"urls":[]}},"protected":false,"followers_count":64059,"friends_count":87,"listed_count":669,"created_at":"Fri Dec 24 10:24:21 +0000 2010","favourites_count":216,"utc_offset":7200,"time_zone":"Madrid","geo_enabled":true,"verified":true,"statuses_count":15027,"lang":"es","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"FFFFFF","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/449580503981494272/mowd4ixm.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/449580503981494272/mowd4ixm.jpeg","profile_background_tile":true,"profile_image_url":"http://pbs.twimg.com/profile_images/3283521528/dbda8089807b2ea159c26a245c2c7301_normal.jpeg","profile_image_url_https":"https://pbs.twimg.com/profile_images/3283521528/dbda8089807b2ea159c26a245c2c7301_normal.jpeg","profile_banner_url":"https://pbs.twimg.com/profile_banners/230125016/1461167798","profile_link_color":"0084B4","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":2,"favorite_count":5,"favorited":true,"retweeted":true,"possibly_sensitive":false,"lang":"es"},"is_quote_status":false,"retweet_count":2,"favorite_count":0,"favorited":true,"retweeted":true,"lang":"es"},{"created_at":"Fri Sep 30 07:42:31 +0000 2016","id":781761126065246200,"id_str":"781761126065246209","text":"La estrategia de @BBVABancomer para consolidar sus valores https://t.co/p7Gi7JGAqg","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"BBVABancomer","name":"BBVA Bancomer","id":637362286,"id_str":"637362286","indices":[17,30]}],"urls":[{"url":"https://t.co/p7Gi7JGAqg","expanded_url":"http://bbva.info/2da1hW0","display_url":"bbva.info/2da1hW0","indices":[59,82]}]},"source":"<a href=\"http://twitter.com\" rel=\"nofollow\">Twitter Web Client</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":775250916622602200,"id_str":"775250916622602241","name":"BBVA Literacy","screen_name":"BBVALiteracy","location":"","description":"","url":null,"entities":{"description":{"urls":[]}},"protected":false,"followers_count":0,"friends_count":1,"listed_count":0,"created_at":"Mon Sep 12 08:33:16 +0000 2016","favourites_count":3,"utc_offset":3600,"time_zone":"Dublin","geo_enabled":false,"verified":false,"statuses_count":3,"lang":"es","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"F5F8FA","profile_background_image_url":null,"profile_background_image_url_https":null,"profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/781759763315064832/nBALdP6E_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/775250916622602241/1475221156","profile_link_color":"2B7BB9","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":false,"default_profile":true,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":1,"favorited":true,"retweeted":false,"possibly_sensitive":false,"lang":"es"}]};


	//jQuery.get(url_twitter, function(d) {

	
		if (d.code === 200 && d.data.length > 0) {

			jQuery('.row.tweets-container').html('');
	        
	        jQuery.each(d.data, function(i, result) {

	        	var nombre = result.user.name;
	        	var usuario = '@' + result.user.screen_name;
	        	var imagen = result.user.profile_image_url_https;
	        	var fecha = new Date(result.created_at);
	        	var texto = result.text;
	        	var id = result.id_str;

	        	if(result.retweeted_status == undefined){

	        		var likes = result.favorite_count;        		
	        	}
	        	else{

	        		var likes = result.retweeted_status.favorite_count;
	        	}


	        	var meses = [
	        		object_name_twitter.enero, 
	        		object_name_twitter.febrero,
	        		object_name_twitter.marzo,
	        		object_name_twitter.abril,
	        		object_name_twitter.mayo,
	        		object_name_twitter.junio,
	        		object_name_twitter.julio,
	        		object_name_twitter.agosto,
	        		object_name_twitter.septiembre,
	        		object_name_twitter.octubre,
	        		object_name_twitter.noviembre,
	        		object_name_twitter.diciembre,
	        	];


	        	fecha = fecha.getDate() + ' ' +  meses[fecha.getMonth()];
	        	fecha = fecha.toString();
	        	fecha = fecha.toLowerCase();
	        	
	        	texto = texto.replace(/#(\S*)/g,'<b>#$1</b>');
	        	texto = texto.replace(/@(\S*)/g,'<b>@$1</b>');
	        	texto = texto.replace(/http(\S*)/g,'<b>http$1</b>');

	        	jQuery('.row.tweets-container').append('<div class="col-xs-10 col-xs-offset-1 col-sm-offset-0 col-sm-4"> <section class="row tweet"> <div class="image-container nopadding col-xs-3"> <img src="' + imagen + '" alt=""> </div> <div class="data-container col-xs-9"> <div class="user-info"> <span class="user-name">' + nombre + '</span> <span class="account">' + usuario + '</span> </div> <p class="tweet-content mt-xxs mb-xxs"> ' + texto + ' </p> <div class="row statistics"> <div class="col-xs-2 col-sm-2 nopadding likes"> <a href="https://twitter.com/intent/like?tweet_id=' + id + '&&original_referer=https://dev.twitter.com"><span class="bbva-icon-favorite"></span></a> <span>' + likes + '</span> </div> <div class="col-xs-1 col-sm-2 nopadding share"> <span class="bbva-icon-share"></span> </div> <div class="col-xs-9 col-sm-8 nopadding date"> <span>' + fecha + '</span> </div> </div> </div> </section> </div>');

	        });
		
		} else {
			jQuery('.row.tweets-container').append('<p>No hay tweets disponibles</p>');
		}
	//}, 'json');

});